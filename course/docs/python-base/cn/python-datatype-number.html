<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<title>简述</title>
<link rel="stylesheet" href="../../static/style.css" type="text/css" />
<link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<div class="header doc-header web-show">
<div class="col-sm-offset-2 col-sm-8  index-header">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#example-navbar-collapse">
<span class="sr-only">切换导航</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/index.html" class="logo"><img src="http://www.qpython.org/static/img_logo.png"></a>
</div>
<ul class="header-title collapse navbar-collapse" id="example-navbar-collapse" >
<li>
<a href="http://www.qpython.org/index.html">Home</a>
</li>
<li>
<a href="http://www.qpython.org/document.html">Guide</a>
</li>
<li class="header-phone-selected">
<a href="/index.html" class="header-selected">Course</a>
<span class="header-title-selected"></span>
</li>
<li>
<a href="http://www.aipy.org">AIPY</a>
</li>
<li>
<a target="_blank" href="https://github.com/qpython-android/qpython">Github</a>
</li>
</ul>
<div class="search-box hidden-xs">
<form action="/search.html">
<input type="search" name="q" placeholder="keyword">
<input type="hidden" name="check_keywords" value="yes" />
<input type="hidden" name="area" value="default" />
<button><img src="http://www.qpython.org/static/ic_search.png"></button>
</form>
</div>
</div>
</div>
<main class="contain web-content">
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<div class="section" id="id1">
<h1>简述<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>在 Python 中，对于数字的定义很简单 - 整数、浮点数和复数，分别被定义为 int、float 和 complex 类。只要数学不是体育老师教的，绝大部分人学起来都不会有任何问题。</p>
<p>对于数字而言，除了进行基本的运算（例如：算术运算、比较运算）之外，Python 还提供了类型间的相互转换功能，以及其他的高级操作。</p>
<div class="section" id="id2">
<h2>数字类型<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>在 Python 中，支持三种不同的数字类型：</p>
<ul class="simple">
<li>int（整型）：也被称为整数，是正或负整数，不带小数点。</li>
<li>float（浮点型）：由整数部分与小数部分组成，浮点型也可以使用科学计数法表示。</li>
<li>complex（复数）：以 x + yj 的形式构成，其中 x 是实部，y 是虚部。</li>
</ul>
<p><strong>注意</strong>： Py3.x 去除了 long 类型，现在只有一种整型 - int，表示为长整型。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 整型</span>
<span class="nb">type</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>  <span class="c1"># 浮点型</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">+</span> <span class="mf">5.0</span><span class="n">j</span>  <span class="c1"># 复数</span>
<span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<button class="button">Run …</button>
</div>
<div class="section" id="id3">
<h2>整数溢出？<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>天文数字：形容非常大的数字，已经无法用一个确切的数来形容。
对于很多编程语言来说，天文数字是需要被正视的，因为往往会引发整数溢出问题。但是，在 Python 中无需忧虑，因为它支持“无限精度”的整数。</p>
<p>来感受一下：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">500</span>  <span class="c1"># 2 的 500 次幂</span>
<span class="n">i</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>哇，多么幸运，Python 做出了如此精妙的安排。</p>
<p>虽然整数可以是任意长度，但是浮点数只能精确到 15 位小数（16 位不准确）。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="mf">0.12345678901234567890</span>  <span class="c1"># 值被截断</span>
<span class="n">f</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p><strong>注意</strong>： f 的值被截断。</p>
</div>
<div class="section" id="id4">
<h2>数字系统<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>对于绝大部分人来说，每天处理的数字都是十进制（以 10 为基数）数字系统。但是程序员（尤其是搞嵌入式的），往往需要使用二进制（以 2 为基数）、八进制（以 8 为基数）和十六进制（以 16 为基数）数字系统。</p>
<p>在 Python 中，可以在数字前面放置相应的前缀来表示这些数字。</p>
<p>来看一些示例：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">5</span>  <span class="c1"># 十进制</span>
<span class="mb">0b1010</span>  <span class="c1"># 二进制</span>
<span class="mo">0o15</span>  <span class="c1"># 八进制</span>
<span class="mh">0xFB</span>  <span class="c1"># 十六进制</span>
</pre></div>
</div>
<p>十进制还可以转换为二进制、八进制、十六进制：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dec</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># 十进制</span>
<span class="nb">bin</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>  <span class="c1"># 十进制转二进制</span>
<span class="nb">oct</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>  <span class="c1"># 十进制转八进制</span>
<span class="nb">hex</span><span class="p">(</span><span class="n">dec</span><span class="p">)</span>  <span class="c1"># 十进制转十六进制</span>
</pre></div>
</div>
<button class="button">Run …</button>
</div>
<div class="section" id="id5">
<h2>类型转换<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>一般情况下，数据的类型的转换通常是由编译系统自动进行的，不需要人工干预，所以被称为隐式类型转换。但如果程序要求一定要将某一类型的数据转换为另外一种类型，则可以利用强制类型转换运算符进行转换，这种强制转换过程称为**显式类型转换**。</p>
<p>在进行数字运算（例如：加法、减法）时，如果其中的一个操作数是浮点数，则会将整数隐式（自动）转换为浮点数。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">+</span> <span class="mf">3.0</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>可以看到，2（整数）被转换为 2.0（浮点数），计算结果（5.0）也是一个浮点数。</p>
<p>除此之外，还可以使用 int()、float() 和 complex() 等内置函数来**显式转换**类型，这些函数甚至可以将字符串转换为数字。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">(</span><span class="mf">2.3</span><span class="p">)</span>
<span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mf">2.8</span><span class="p">)</span>
<span class="nb">float</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">complex</span><span class="p">(</span><span class="s1">&#39;3+5j&#39;</span><span class="p">)</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>从 float 转换为 int 时，数字将被截断（整数更接近零）。</p>
<p>Decimal</p>
<hr class="docutils" />
<p>通常，在使用内置类 float 时，会执行一些“匪夷所思”的计算。</p>
<p>我们知道 1/3 等于 0.333…（无限循环），0.1 + 0.2 等于 0.3，但 Python 似乎不这么认为。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span>
<span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>What？难道是眼花了？和数学知识不一样？</p>
<p>事实证明，浮点数在计算机硬件中以二进制小数来表示，因为计算机只能理解二进制（0 和 1）。出于这个原因，大部分十进制小数都不能准确地存储在计算机中。</p>
<p>例如，十进制小数 0.1，将转换为无限长的二进制小数 0.000110011001100110011…，而计算机存储的位数是有限的。也就是说，转换为二进制后，只会接近十进制的 0.1，但永远不会相等。</p>
<p>因此，<strong>这是计算机硬件的局限性，而不是 Python 中的错误</strong>。</p>
<p>为了克服这个问题，可以使用 Python 自带的 decimal 模块。虽然浮点数的精度最高可达 15 位，但 decimal 模块可自定义精度。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">decimal</span>
<span class="mf">0.1</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span>  <span class="c1"># 当前上下文</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span>  <span class="c1"># 精度默认 28 位</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="n">d</span>
<span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># 将精度修改为 3 位</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="n">d</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>除此之外，它也保留了重要意义。我们知道 25.50 比 25.5 更精确，因为 25.50 有两个有效的小数位。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">decimal</span> <span class="k">import</span> <span class="n">Decimal</span> <span class="k">as</span> <span class="n">D</span>
<span class="n">D</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">D</span><span class="p">(</span><span class="s1">&#39;0.2&#39;</span><span class="p">)</span>
<span class="n">D</span><span class="p">(</span><span class="s1">&#39;1.2&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">D</span><span class="p">(</span><span class="s1">&#39;2.50&#39;</span><span class="p">)</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p><strong>注意</strong>： 计算结果末尾的 0</p>
<p>有人可能会问：既然 Decimal 这么棒，为什么每次不使用 Decimal 来代替 float 呢？主要原因是效率，float 运算要比 Decimal 运算更快。</p>
<p>何时使用 Decimal，而不是 float 呢？在以下情况下，通常使用 Decimal。</p>
<ul class="simple">
<li>当在做金融应用时，需要精确表示。</li>
<li>当想要控制所需的精度级别时</li>
<li>当想要实现有效的小数位概念时</li>
<li>当我们想要像在学校里学到的那样进行小数运算时</li>
</ul>
</div>
<div class="section" id="fractions">
<h2>fractions（有理数）<a class="headerlink" href="#fractions" title="Permalink to this headline">¶</a></h2>
<p>fractions 模块提供了涉及分数的操作，该模块支持有理数运算。</p>
<p>一个 Fraction 实例可以由一对整数、另一个有理数、或者一个字符串来构造。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fractions</span>
<span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fractions</span><span class="o">.</span><span class="n">Fraction</span><span class="p">(</span><span class="mf">1.5</span><span class="p">))</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>当从 float 创建 Fraction 时，可能会得到一些不寻常的结果，这是由于之前讨论的不完美的二进制浮点数造成的。</p>
<p>幸运的是，fraction 也允许用字符串进行实例化，这是使用十进制数时的首选方案。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fractions</span> <span class="k">import</span> <span class="n">Fraction</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mf">1.1</span><span class="p">))</span>  <span class="c1"># 浮点数 1.1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="s1">&#39;1.1&#39;</span><span class="p">))</span>  <span class="c1"># 字符串 &#39;1.1&#39;</span>
</pre></div>
</div>
<button class="button">Run …</button>
<p>此外，该数据类型也支持所有基本操作。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fractions</span> <span class="k">import</span> <span class="n">Fraction</span> <span class="k">as</span> <span class="n">F</span>
<span class="n">F</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">F</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">1</span> <span class="o">/</span> <span class="n">F</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">F</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
</pre></div>
</div>
<button class="button">Run …</button>
</div>
<div class="section" id="math">
<h2>math（数学函数）<a class="headerlink" href="#math" title="Permalink to this headline">¶</a></h2>
<p>math 模块用于处理数学相关的运算，例如：三角学、对数等。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="n">math</span><span class="o">.</span><span class="n">pi</span>  <span class="c1"># 圆周率 π</span>
<span class="n">math</span><span class="o">.</span><span class="n">e</span>  <span class="c1"># 自然常数</span>
<span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># 余弦</span>
<span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># 以 10 为基数的 100 的对数</span>
<span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># 2**5（2 的 5 次方） 运算后的值</span>
<span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>  <span class="c1"># 9 的平方根</span>
<span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 5!（5 的阶乘）</span>
</pre></div>
</div>
<button class="button">Run …</button>
</div>
<div class="section" id="random">
<h2>random（生成伪随机数）<a class="headerlink" href="#random" title="Permalink to this headline">¶</a></h2>
<p>random 模块用于生成伪随机数。随机数可用于数学、游戏、安全等领域，还经常被嵌入到算法中，用以提高算法效率，并提高程序的安全性。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]</span>
<span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>  <span class="c1"># 从序列 l 中随机挑选一个元素</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>  <span class="c1"># 将序列 l 的所有元素随机排序</span>
<span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 从指定范围内，按指定基数（缺省值为 1）递增的集合中获取一个随机数</span>
<span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>  <span class="c1"># 随机生成一个实数，范围 [0,1)。</span>
</pre></div>
</div>
<button class="button">Run …</button>
</div>
<div class="section" id="id6">
<h2>作者 &amp; 更新时间<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>作者: <a class="reference external" href="http://blog.csdn.net/liang19890820">一去丶二三里</a></p>
<p>提交: 2017/12/6</p>
</div>
</div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
</main>
<div class="star-footer">
<img onclick="openPurchase()" src="../../static/star.jpg">
<div id="praise"><span>0</span> persons have rewarded</div>
</div>
<div class="foo"></div>
<footer class="clearfix fixfooter web-show">
<div class="col-sm-offset-2 col-sm-6 footer-div1">
<div class="footer-block-item">
<span class="footer-item1">Built with Sphinx using a theme provid by QPython.</span>
<span class="footer-item2 visible-xs">Copyight 2017, QPython.</span>
</div>
</div>
<div class="col-sm-2 footer-div2">
<a href="/index.html" class="pull-right"><img src="http://www.qpython.org/static/img_logo.png"></a>
</div>
</footer>
<div id="purchase-box">
<div class="zh-img purchase-img"></div>
<div class="en-img purchase-img">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="ST6KWAK8R63JW">
<div class="en-thanks-tit">
<input type="hidden" name="on0" value="Thanks">
Thanks
</div>
<div class="en-thanks-sel">
<select name="os0">
<option value="Reward this course">Reward this course $ 0.99 USD</option>
<option value="Reward this course">Reward this course $ 1.49 USD</option>
<option value="Reward this course">Reward this course $ 1.99 USD</option>
<option value="Reward this course">Reward this course $ 2.99 USD</option>
<option value="Reward this course">Reward this course $ 3.49 USD</option>
</select>
</div>
<input type="hidden" name="currency_code" value="USD">
<input type="image" class="pay_img" src="https://www.paypalobjects.com/en_GB/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal – The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/zh_XC/i/scr/pixel.gif" width="1" height="1">
</form>
</div>
</div>
<script>
var milib;
if (milib==undefined) {
var milib = function(){
};
milib.qeditor = function(str){
alert('Please share this page to QPython then run it')
};
milib.getPurchaseNumber = function(str){
//alert('getPurchaseNumber:'+str)
return "10+";
};
milib.a8playVideoFromGW= function(url){
window.open(url)
};
milib.qpylibinstall = function(cat,url,target){
window.open(url)
};
milib.gotoIfPay = function(url, packageId, packageUrl){
window.open(url)
};
} else {
}
function openPurchase() {
//获取标识
var u = window.location.href.split('/')
var s = u[u.length-1].replace('.html', '')
s = u[u.length-2]+'-'+s
if (milib.openPurchaseActivity){
milib.openPurchaseActivity(s)
}else {
if (navigator.language== "zh-CN" || navigator.language== "zh"){
$('.zh-img ').show();
$('.en-img').hide();
}else {
$('.zh-img ').hide();
$('.en-img').show();
}
$('#purchase-box').show();
}
}
$(function() {
$('#purchase-box').click(function() {
$(this).hide();
})
$('.purchase-img').click(function(e) {
e.stopPropagation();
})
})
//按钮事件
function btnEvent(){
var seq = this.getAttribute('target')-2
var a = this.parentElement.getElementsByTagName('pre')
if ( a && a.length > 0){
/**********有代码，调用控制台*************/
var code = a[seq].lastChild.nodeValue
milib.qeditor(code)
}else{
//没有代码，调转
var url = this.getAttribute('data-url');
window.open(url);
}
}
//获取赞赏
function setPraise(){
var u = window.location.href.split('/')
var s = u[u.length-1].replace('.html', '')
s = u[u.length-2]+'-'+s
var i = document.getElementById('praise').getElementsByTagName('span')[0]
var num = milib.getPurchaseNumber(s);
i.innerHTML = num
}
//初始化代码显示
function initCode(){
var prearr = document.getElementsByTagName('pre');
for (var i = 0; i < prearr.length; i++) {
var temp_data = prearr[i].lastChild.nodeValue
//正则处理 lavel5
temp_data = temp_data.replace(/\^2\$/g, spaceString(2));
temp_data = temp_data.replace(/\^4\$/g, spaceString(4));
temp_data = temp_data.replace(/\^6\$/g, spaceString(6));
temp_data = temp_data.replace(/\^8\$/g, spaceString(8));
temp_data = temp_data.replace(/\^10\$/g, spaceString(10));
temp_data = temp_data.replace(/\^12\$/g, spaceString(12));
temp_data = temp_data.replace(/\^16\$/g, spaceString(16));
temp_data = temp_data.replace(/\^20\$/g, spaceString(20));
//set
prearr[i].lastChild.nodeValue = temp_data;
}
}
//产生空格
function spaceString(num){
var v = ''
for (var i = 0; i < num; i++) {
v += ' ';
}
return v;
}
function setSearchHistory (t) {
if (!t)
return;
if (localStorage.course_search_list) {
var list = localStorage.course_search_list.split('%,%');
var i = list.indexOf(t);
if (i !== -1) {
list.splice(i, 1);
list.push(t);
localStorage.course_search_list = list.join('%,%');
}else {
localStorage.course_search_list += '%,%'+t;
}
}else {
localStorage.course_search_list = t;
}
}
window.onload = function(){
setPraise();
initCode();
//将所有的button绑定事件
var b = document.getElementsByTagName('button');
for (var i = 0; i < b.length; i++) {
if (b[i].className=='button') {
b[i].setAttribute('target', i)
b[i].onclick = btnEvent ;
}
}
}
$(function(){
var url = location.href.split('?');
var arg = url[1];
if (!arg){
return;
}
var args = arg.split('&');
for (var i = 0; i < args.length; i++) {
var c = args[i].split('=');
if (c[0]=='form' && c[1] == 'web') {
$('.web-show').css('display','block');
$('.web-content').addClass('margin-header');
}
}
})
$(function() {
$('form').submit(function() {
setSearchHistory($("input[name='q']").val());
})
$('.bodywrapper .body form input').val("");
$($('.bodywrapper .body form input')[0]).attr('placeholder', 'search');
})
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-103260045-3', 'auto');
ga('send', 'pageview');
</script>
</body>
</html>
